{"components/common/modal/modal-close-btn":"<button class=\"modal-close\"\n        type=\"button\"\n        title=\"{{lang 'common.close'}}\"\n        {{additional_attr}}\n>\n    <span class=\"aria-description--hidden\">{{lang 'common.close'}}</span>\n    <span aria-hidden=\"true\">&#215;</span>\n</button>\n","components/products/modals/writeReview":"<div id=\"modal-review-form\" class=\"modal\" data-reveal>\r\n    <div class=\"modal-header\">\r\n        <h2 class=\"modal-header-title\">Product Feedback</h2>\r\n        {{> components/common/modal/modal-close-btn}}\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div id=\"form-container\">\r\n            <div id=\"contact-us-page\" class=\"page-content page-content--centered\">\r\n                <form data-contact-form=\"\" class=\"form\" action=\"/pages.php?action=sendContactForm\" method=\"post\" id=\"feedback-form\">\r\n                    <input type=\"hidden\" name=\"page_id\" id=\"page_id\" value=\"42\">\r\n                    \r\n                    <div class=\"form-row form-row--half\">\r\n                        <div class=\"form-field\">\r\n                            <label class=\"form-label\" for=\"contact_fullname\">Full Name</label>\r\n                            <input class=\"form-input\" type=\"text\" id=\"contact_fullname\" name=\"contact_fullname\" value=\"\">\r\n                        </div>\r\n                        <div class=\"form-field\">\r\n                            <label class=\"form-label\" for=\"contact_email\">Email Address\r\n                                <small>Required</small>\r\n                            </label>\r\n                            <input class=\"form-input\" type=\"text\" id=\"contact_email\" name=\"contact_email\" value=\"\">\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"form-field\">\r\n                        <label class=\"form-label\" for=\"contact_question\">Comments/Questions\r\n                            <small>Required</small>\r\n                        </label>\r\n                        <textarea name=\"contact_question\" id=\"contact_question\" rows=\"5\" cols=\"50\" class=\"form-input\"></textarea>\r\n                    </div>\r\n                    \r\n                    <div class=\"form-field\">\r\n                        <div class=\"g-recaptcha\" data-sitekey=\"6LcjX0sbAAAAACp92-MNpx66FT4pbIWh-FTDmkkz\"></div>\r\n                    </div>\r\n                    \r\n                    <div class=\"form-actions\">\r\n                        <input class=\"button button--primary\" type=\"submit\" value=\"Submit Form\">\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            \r\n            <!-- Thank you message (hidden by default) -->\r\n            <div id=\"thank-you-message\" style=\"display: none; text-align: center; padding: 40px; background: white;\">\r\n                <h3 style=\"color: #333; margin-bottom: 15px;\">Thank you for your feedback!</h3>\r\n                <p style=\"color: #666;\">Your message has been submitted successfully.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<script>\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const feedbackForm = document.getElementById('feedback-form');\r\n    \r\n    if (feedbackForm) {\r\n        feedbackForm.addEventListener('submit', function(e) {\r\n            e.preventDefault(); // Stop the normal form submission\r\n            \r\n            // Validate required fields\r\n            const email = document.getElementById('contact_email').value.trim();\r\n            const comments = document.getElementById('contact_question').value.trim();\r\n            const recaptchaResponse = grecaptcha.getResponse();\r\n            \r\n            // Check email\r\n            if (!email) {\r\n                alert('Email is required');\r\n                return;\r\n            }\r\n            \r\n            // Check email format\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            if (!emailRegex.test(email)) {\r\n                alert('Please enter a valid email address');\r\n                return;\r\n            }\r\n            \r\n            // Check comments\r\n            if (!comments) {\r\n                alert('Comments/Questions field is required');\r\n                return;\r\n            }\r\n            \r\n            // Check reCAPTCHA\r\n            if (!recaptchaResponse) {\r\n                alert('Please complete the reCAPTCHA verification');\r\n                return;\r\n            }\r\n            \r\n            // Now proceed with existing functionality\r\n            const commentsField = document.getElementById('contact_question');\r\n            const currentValue = commentsField.value;\r\n            \r\n            // Find the product title and add it to comments\r\n            const productTitleElement = document.querySelector('.productView-title, h1.productView-title, .product-title, h1.product-title');\r\n            let productName = 'UNKNOWN PRODUCT';\r\n            \r\n            if (productTitleElement) {\r\n                productName = productTitleElement.textContent.trim();\r\n            }\r\n            \r\n            const feedbackText = 'PRODUCT FEEDBACK FOR ' + productName;\r\n            \r\n            if (!currentValue.startsWith('PRODUCT FEEDBACK FOR')) {\r\n                if (currentValue.trim() === '') {\r\n                    commentsField.value = feedbackText;\r\n                } else {\r\n                    commentsField.value = feedbackText + '\\n\\n' + currentValue;\r\n                }\r\n            }\r\n            \r\n            // Submit the form via AJAX\r\n            const formData = new FormData(feedbackForm);\r\n            \r\n            fetch('/pages.php?action=sendContactForm', {\r\n                method: 'POST',\r\n                body: formData\r\n            })\r\n            .then(response => {\r\n                // Hide the form container and show thank you message\r\n                const formContainer = document.getElementById('contact-us-page');\r\n                const thankYouMessage = document.getElementById('thank-you-message');\r\n                \r\n                if (formContainer) {\r\n                    formContainer.style.display = 'none';\r\n                }\r\n                if (thankYouMessage) {\r\n                    thankYouMessage.style.display = 'block';\r\n                }\r\n                \r\n                // After 3 seconds, click the close button and hide the review link\r\n                setTimeout(function() {\r\n                        // Remove the \"Write a Review\" link completely\r\n                        const reviewLink = document.querySelector('.productView-reviewLink--new, a[data-reveal-id=\"modal-review-form\"]');\r\n                        if (reviewLink) {\r\n                            reviewLink.remove(); // Completely removes the element from DOM\r\n                        }\r\n                    \r\n                    // Click the close button\r\n                    const closeButton = document.querySelector('.modal-close, button.modal-close');\r\n                    if (closeButton) {\r\n                        closeButton.click();\r\n                    }\r\n                }, 3000);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n                // Show actual error to user\r\n                alert('Submission failed. Please check all fields and try again.');\r\n                \r\n                // Reset reCAPTCHA so they can try again\r\n                if (typeof grecaptcha !== 'undefined') {\r\n                    grecaptcha.reset();\r\n                }\r\n                \r\n                // Don't close the modal - let them try again\r\n            });\r\n        });\r\n    }\r\n});\r\n</script>\r\n\r\n<!-- reCAPTCHA Script -->\r\n<script src=\"https://www.google.com/recaptcha/api.js\" async defer></script>"}
