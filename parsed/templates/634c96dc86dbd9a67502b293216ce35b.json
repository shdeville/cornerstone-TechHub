{
  "components/products/modals/writeReview": "<div id=\"modal-review-form\" class=\"modal\" data-reveal>\n    <div class=\"modal-header\">\n        <h2 class=\"modal-header-title\">Product Feedback</h2>\n        {{> components/common/modal/modal-close-btn}}\n    </div>\n    <div class=\"modal-body\">\n        <div id=\"form-container\">\n            <div id=\"contact-us-page\" class=\"page-content page-content--centered\">\n                <form data-contact-form=\"\" class=\"form\" action=\"/pages.php?action=sendContactForm\" method=\"post\" id=\"feedback-form\">\n                    <input type=\"hidden\" name=\"page_id\" id=\"page_id\" value=\"26\">\n                    \n                    <div class=\"form-row form-row--half\">\n                        <div class=\"form-field\">\n                            <label class=\"form-label\" for=\"contact_fullname\">Full Name</label>\n                            <input class=\"form-input\" type=\"text\" id=\"contact_fullname\" name=\"contact_fullname\" value=\"\">\n                        </div>\n                        <div class=\"form-field\">\n                            <label class=\"form-label\" for=\"contact_email\">Email Address\n                                <small>Required</small>\n                            </label>\n                            <input class=\"form-input\" type=\"text\" id=\"contact_email\" name=\"contact_email\" value=\"\">\n                        </div>\n                    </div>\n                    \n                    <div class=\"form-field\">\n                        <label class=\"form-label\" for=\"contact_question\">Comments/Questions\n                            <small>Required</small>\n                        </label>\n                        <textarea name=\"contact_question\" id=\"contact_question\" rows=\"5\" cols=\"50\" class=\"form-input\"></textarea>\n                    </div>\n                    \n                    <div class=\"form-field\">\n                        <div class=\"g-recaptcha\" data-sitekey=\"6LcjX0sbAAAAACp92-MNpx66FT4pbIWh-FTDmkkz\"></div>\n                    </div>\n                    \n                    <div class=\"form-actions\">\n                        <input class=\"button button--primary\" type=\"submit\" value=\"Submit Form\">\n                    </div>\n                </form>\n            </div>\n            \n            <!-- Thank you message (hidden by default) -->\n            <div id=\"thank-you-message\" style=\"display: none; text-align: center; padding: 40px; background: white;\">\n                <h3 style=\"color: #333; margin-bottom: 15px;\">Thank you for your feedback!</h3>\n                <p style=\"color: #666;\">Your message has been submitted successfully.</p>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\ndocument.addEventListener('DOMContentLoaded', function() {\n    const feedbackForm = document.getElementById('feedback-form');\n    \n    if (feedbackForm) {\n        feedbackForm.addEventListener('submit', function(e) {\n            e.preventDefault(); // Stop the normal form submission\n            \n            // Validate required fields\n            const email = document.getElementById('contact_email').value.trim();\n            const comments = document.getElementById('contact_question').value.trim();\n            const recaptchaResponse = grecaptcha.getResponse();\n            \n            // Check email\n            if (!email) {\n                alert('Email is required');\n                return;\n            }\n            \n            // Check email format\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (!emailRegex.test(email)) {\n                alert('Please enter a valid email address');\n                return;\n            }\n            \n            // Check comments\n            if (!comments) {\n                alert('Comments/Questions field is required');\n                return;\n            }\n            \n            // Check reCAPTCHA\n            if (!recaptchaResponse) {\n                alert('Please complete the reCAPTCHA verification');\n                return;\n            }\n            \n            // Now proceed with existing functionality\n            const commentsField = document.getElementById('contact_question');\n            const currentValue = commentsField.value;\n            \n            // Find the product title and add it to comments\n            const productTitleElement = document.querySelector('.productView-title, h1.productView-title, .product-title, h1.product-title');\n            let productName = 'UNKNOWN PRODUCT';\n            \n            if (productTitleElement) {\n                productName = productTitleElement.textContent.trim();\n            }\n            \n            const feedbackText = 'PRODUCT FEEDBACK FOR ' + productName;\n            \n            if (!currentValue.startsWith('PRODUCT FEEDBACK FOR')) {\n                if (currentValue.trim() === '') {\n                    commentsField.value = feedbackText;\n                } else {\n                    commentsField.value = feedbackText + '\\n\\n' + currentValue;\n                }\n            }\n            \n            // Submit the form via AJAX\n            const formData = new FormData(feedbackForm);\n            \n            fetch('/pages.php?action=sendContactForm', {\n                method: 'POST',\n                body: formData\n            })\n            .then(response => {\n                // Hide the form container and show thank you message\n                const formContainer = document.getElementById('contact-us-page');\n                const thankYouMessage = document.getElementById('thank-you-message');\n                \n                if (formContainer) {\n                    formContainer.style.display = 'none';\n                }\n                if (thankYouMessage) {\n                    thankYouMessage.style.display = 'block';\n                }\n                \n                // After 3 seconds, click the close button and hide the review link\n                setTimeout(function() {\n                        // Remove the \"Write a Review\" link completely\n                        const reviewLink = document.querySelector('.productView-reviewLink--new, a[data-reveal-id=\"modal-review-form\"]');\n                        if (reviewLink) {\n                            reviewLink.remove(); // Completely removes the element from DOM\n                        }\n                    \n                    // Click the close button\n                    const closeButton = document.querySelector('.modal-close, button.modal-close');\n                    if (closeButton) {\n                        closeButton.click();\n                    }\n                }, 3000);\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                // Show actual error to user\n                alert('Submission failed. Please check all fields and try again.');\n                \n                // Reset reCAPTCHA so they can try again\n                if (typeof grecaptcha !== 'undefined') {\n                    grecaptcha.reset();\n                }\n                \n                // Don't close the modal - let them try again\n            });\n        });\n    }\n});\n</script>\n\n<!-- reCAPTCHA Script -->\n<script src=\"https://www.google.com/recaptcha/api.js\" async defer></script>\n",
  "components/common/modal/modal-close-btn": "<button class=\"modal-close\"\n        type=\"button\"\n        title=\"{{lang 'common.close'}}\"\n        {{additional_attr}}\n>\n    <span class=\"aria-description--hidden\">{{lang 'common.close'}}</span>\n    <span aria-hidden=\"true\">&#215;</span>\n</button>\n"
}
